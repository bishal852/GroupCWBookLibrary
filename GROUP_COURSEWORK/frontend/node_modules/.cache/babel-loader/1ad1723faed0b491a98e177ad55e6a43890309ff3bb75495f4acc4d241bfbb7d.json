{"ast":null,"code":"import { API_URL } from \"../config\";\nconst getCart = async () => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"Authentication required\");\n  }\n  const response = await fetch(`${API_URL}/api/cart`, {\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || \"Failed to fetch cart\");\n  }\n  return await response.json();\n};\nconst addToCart = async (bookId, quantity = 1) => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"Authentication required\");\n  }\n  const response = await fetch(`${API_URL}/api/cart`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      bookId,\n      quantity\n    })\n  });\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || \"Failed to add book to cart\");\n  }\n  return await response.json();\n};\nconst updateCartItem = async (cartItemId, quantity) => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"Authentication required\");\n  }\n  const response = await fetch(`${API_URL}/api/cart/${cartItemId}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`\n    },\n    body: JSON.stringify({\n      quantity\n    })\n  });\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || \"Failed to update cart item\");\n  }\n  return await response.json();\n};\nconst removeFromCart = async cartItemId => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"Authentication required\");\n  }\n  const response = await fetch(`${API_URL}/api/cart/${cartItemId}`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || \"Failed to remove item from cart\");\n  }\n  return await response.json();\n};\nconst clearCart = async () => {\n  const token = localStorage.getItem(\"token\");\n  if (!token) {\n    throw new Error(\"Authentication required\");\n  }\n  const response = await fetch(`${API_URL}/api/cart`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${token}`\n    }\n  });\n  if (!response.ok) {\n    const error = await response.json();\n    throw new Error(error.message || \"Failed to clear cart\");\n  }\n  return await response.json();\n};\nexport const cartService = {\n  getCart,\n  addToCart,\n  updateCartItem,\n  removeFromCart,\n  clearCart\n};","map":{"version":3,"names":["API_URL","getCart","token","localStorage","getItem","Error","response","fetch","headers","Authorization","ok","error","json","message","addToCart","bookId","quantity","method","body","JSON","stringify","updateCartItem","cartItemId","removeFromCart","clearCart","cartService"],"sources":["C:/Users/nikku/Desktop/GROUP_COURSEWORK/frontend/src/services/cartService.js"],"sourcesContent":["import { API_URL } from \"../config\"\n\nconst getCart = async () => {\n  const token = localStorage.getItem(\"token\")\n  if (!token) {\n    throw new Error(\"Authentication required\")\n  }\n\n  const response = await fetch(`${API_URL}/api/cart`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(error.message || \"Failed to fetch cart\")\n  }\n\n  return await response.json()\n}\n\nconst addToCart = async (bookId, quantity = 1) => {\n  const token = localStorage.getItem(\"token\")\n  if (!token) {\n    throw new Error(\"Authentication required\")\n  }\n\n  const response = await fetch(`${API_URL}/api/cart`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ bookId, quantity }),\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(error.message || \"Failed to add book to cart\")\n  }\n\n  return await response.json()\n}\n\nconst updateCartItem = async (cartItemId, quantity) => {\n  const token = localStorage.getItem(\"token\")\n  if (!token) {\n    throw new Error(\"Authentication required\")\n  }\n\n  const response = await fetch(`${API_URL}/api/cart/${cartItemId}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n    body: JSON.stringify({ quantity }),\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(error.message || \"Failed to update cart item\")\n  }\n\n  return await response.json()\n}\n\nconst removeFromCart = async (cartItemId) => {\n  const token = localStorage.getItem(\"token\")\n  if (!token) {\n    throw new Error(\"Authentication required\")\n  }\n\n  const response = await fetch(`${API_URL}/api/cart/${cartItemId}`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(error.message || \"Failed to remove item from cart\")\n  }\n\n  return await response.json()\n}\n\nconst clearCart = async () => {\n  const token = localStorage.getItem(\"token\")\n  if (!token) {\n    throw new Error(\"Authentication required\")\n  }\n\n  const response = await fetch(`${API_URL}/api/cart`, {\n    method: \"DELETE\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  if (!response.ok) {\n    const error = await response.json()\n    throw new Error(error.message || \"Failed to clear cart\")\n  }\n\n  return await response.json()\n}\n\nexport const cartService = {\n  getCart,\n  addToCart,\n  updateCartItem,\n  removeFromCart,\n  clearCart,\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}